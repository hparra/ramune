<!--

Copyright ¬© 2008 The Regents of the University of California
All Rights Reserved

Created by Hector Guillermo Parra, hector@hectorparra.com
California Institute for Telecommunications and Information Technology
University of California, Irvine

-->
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Ramune Prototype</title>
		<script type="text/javascript" src="javascripts/jquery-1.3.2.js" ></script>
		<script type="text/javascript" src="javascripts/jquery.swfobject.js" ></script>
		<script type="text/javascript" src="javascripts/jRamune.js" ></script>
		<style>
		</style>
		<script type="text/javascript">
		// CHANGED: Renamed as jRamune
		// CHANGED: Extract as jRamune.js
		
		function placeCall() {
			key = prompt("FarID?", "");
			if(key) 
				jRamune.placeCall('test', key);
		}
		
		// TODO: Integrate into frescolita
		$(document).ready(function() {
			
			// hide all states
			for (i in jRamune.states)
				$('#' + jRamune.states[i]).hide();
			
			$("#ramunex").bind(jRamune.events.NETCONNECTION_SUCCESSFUL, function(e) {
				$("#nearID").html(e.farID);
			});
			
			$("#ramunex").bind(jRamune.events.STATE_CHANGED, function(e) {
				$("#currentState").html(e.state);
				
				for (i in jRamune.states)
					$('#' + jRamune.states[i]).hide();

				$("#" + e.state).show();
			});
			
			$("#ramunex").bind(jRamune.events.RESIZE, function(e) {
				// FIXME: we never want people to access div#ramune directly
				$("#ramune").css("width", e.width);
				$("#ramune").css("height", e.height);
			});
			
			jRamune.initialize("#ramunex", "", {});
		});
		</script>
	</head>

	<body scroll="no"><!-- TODO: Research this tag option. Valid HTML? -->
		<div>Current State: <span id="currentState"></span></div>
		<div>Your NearID: <span id="nearID"></span></div>
		<!-- STATES -->
		<div id="RamuneCallNotReady">
			Not Ready
		</div>
		<div id="RamuneCallReady">
			<a href="#" onclick="placeCall()">Place Call</a>
		</div>
		<div id="RamuneCallCalling">
			TODO: Cancel Call
		</div>
		<div id="RamuneCallRinging">
			<a href="#" onclick="jRamune.acceptCall()">Accept Call?</a>
			<a href="#" onclick="jRamune.ignoreCall()">Ignore Call?</a>
		</div>
		<div id="RamuneCallEstablished">
			<a href="#" onclick="jRamune.endCall()">Hang Up</a>
		</div>
		<div id="RamuneCallFailed">
		</div>
		
		<div id="ramunex"></div>
	</body>
</html>
