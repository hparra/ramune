var msie6=$.browser.msie&&$.browser.version=="6.0";var zi=100;jQuery.fn.buildContainers=function(){return this.each(function(){this.options={containment:"document",elementsPath:"elements/"};var a=$(this);a.find(".containerTable:first").css("width","100%");a.find(".c:first").wrapInner("<div class='containerBody'style='display:block'></div>");a.find(".n:first").attr("unselectable","on");var b=a.attr("icon")?a.attr("icon"):"";var c=a.attr("buttons")?a.attr("buttons"):"";a.setIcon(b,this.options);a.setButtons(c,this.options);if(msie6&&a.css("height")=="auto"){a.find(".containerBody:first").hide()}a.find(".containerBody:first",".c:first").css("height",a.outerHeight()-a.find(".n:first").outerHeight()-a.find(".s:first").outerHeight());if(msie6&&a.css("height")=="auto"){a.find(".containerBody:first").show()}if(a.hasClass("draggable")){a.css({position:"absolute"});a.find(".n:first").css({cursor:"move"});a.css({zIndex:zi++});a.draggable({handle:".n:first",cancel:".c",delay:0,containment:"document"});a.mousedown(function(){$(this).css({zIndex:zi++})})}if(a.hasClass("resizable")){a.containerResize(this.options)}if(a.attr("minimized")=="true"){a.attr("minimized","false");a.minimize(this.options)}$(this).attr("minimized","false");if(a.attr("iconized")=="true"){a.attr("iconized","false");a.iconize(this.options)}$(this).attr("iconized","false")})};jQuery.fn.containerResize=function(a){$(this).resizable({handles:$(this).hasClass("draggable")?"":"s,e",minWidth:150,minHeight:150,helper:"proxy",transparent:!$.browser.msie,autoHide:!msie6,stop:function(c,d){var b=msie6?d.helper:$(this);this.elHeight=b.outerHeight()-$(this).find(".n:first").outerHeight()-$(this).find(".s:first").outerHeight();$(this).find(".containerBody:first",".c:first").css({height:this.elHeight})}})};jQuery.fn.setIcon=function(b,a){if(b!=""){$(this).find(".no:first").append("<img class='icon' src='"+a.elementsPath+b+"' style='position:absolute'>")}else{$(this).find(".n:first").css({paddingLeft:"0"})}};jQuery.fn.setButtons=function(f,e){var a=$(this);var e=e;if(f!=""){var d=f.split(",");$(this).find(".ne:first").append("<div class='buttonBar' style='position:absolute'></div>");for(var c in d){if(d[c]=="c"){$(this).find(".buttonBar:first").append("<img src='"+e.elementsPath+"close.png' class='close'>");$(this).find(".close:first").bind("click",function(){a.fadeOut(200)})}if(d[c]=="m"){$(this).find(".n:first").attr("unselectable","on");$(this).find(".buttonBar:first").append("<img src='"+e.elementsPath+"min.png' class='minimizeContainer'>");$(this).find(".minimizeContainer:first").bind("click",function(){a.minimize(e)});$(this).find(".n:first").bind("dblclick",function(){a.minimize(e)})}if(d[c]=="p"){$(this).find(".buttonBar:first").append("<img src='"+e.elementsPath+"print.png' class='printContainer'>");$(this).find(".printContainer:first").bind("click",function(){})}if(d[c]=="i"){$(this).find(".buttonBar:first").append("<img src='"+e.elementsPath+"iconize.png' class='iconizeContainer'>");$(this).find(".iconizeContainer:first").bind("click",function(){a.iconize(e)})}}var b=$.browser.mozilla||$.browser.safari;$(this).find(".buttonBar:first img").css({opacity:0.5,cursor:"pointer"}).mouseover(function(){if(b){$(this).fadeTo(200,1)}}).mouseout(function(){if(b){$(this).fadeTo(200,0.5)}})}};jQuery.fn.minimize=function(b){var a=$(this);if($(this).attr("minimized")=="false"){this.w=a.width();this.h=a.height();a.find(".containerTable:first").css("width","100%");a.find(".middle:first").fadeOut("fast",function(){a.css("height","")});$(this).attr("minimized","true");a.find(".minimizeContainer:first").attr("src",b.elementsPath+"max.png");a.resizable("destroy")}else{a.find(".middle:first").fadeIn("slow",function(){a.css("height",a.find(".containerTable:first").height())});if(a.hasClass("resizable")){a.containerResize()}$(this).attr("minimized","false");a.find(".minimizeContainer:first").attr("src","elements/min.png")}};jQuery.fn.iconize=function(a){return this.each(function(){var b=$(this);b.attr("w",b.width());b.attr("h",b.height());b.attr("t",b.css("top"));b.attr("l",b.css("left"));b.resizable("destroy");if(!$.browser.msie){b.find(".containerTable:first").fadeOut("fast");b.animate({height:"32px",width:"32px",left:0},200)}else{b.find(".containerTable:first").hide();b.css({height:"32px",width:"32px",left:0})}b.append("<img src='"+a.elementsPath+(b.attr("icon")?b.attr("icon"):"restore.png")+"' class='restoreContainer'>");b.find(".restoreContainer:first").bind("click",function(){if(!$.browser.msie){b.find(".containerTable:first").fadeIn("fast");b.animate({height:b.attr("h"),width:b.attr("w"),left:b.attr("l")},200)}else{b.find(".containerTable:first").show();b.css({height:b.attr("h"),width:b.attr("w"),left:b.attr("l")})}b.find(".restoreContainer:first").remove()})})};
