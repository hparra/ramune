<!--

RamuneTest.html

Copyright Â© 2008 The Regents of the University of California
All Rights Reserved

Created by Hector Guillermo Parra, hector@hectorparra.com
California Institute for Telecommunications and Information Technology
University of California, Irvine

-->
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="Content-Script-Type" content="application/javascript" />
		<title>Ramune Test</title>
		
		<style>
			body {
				color: white;
				background-color: black;
			}
		
			#Ramune {
				border: 1px solid #AAAAAA;
			}
		</style>
		
		<!-- Third-party (vendor) -->
		<script type="application/javascript" src="http://marco.calit2.uci.edu/lib/swfobject/2.2/swfobject.js"></script>
		<script type="application/javascript" src="http://marco.calit2.uci.edu/lib/swfobject/fabridge/FABridge.js"></script>
		<script type="application/javascript" src="http://marco.calit2.uci.edu/lib/jquery/jquery-1.3.2.js"></script>
		<script type="application/javascript" src="Ramune.js"></script>
		<script type="application/javascript">
			placeCall = function() {
				v = prompt("Adobe Stratus farID: ");
				if (v !== null)
					Ramune.placeCall("?", v);
			}
			$(document).ready(function() {
				// FIXME: redesign
				Ramune.addEventListener(Ramune.INITIALIZED, function() {
					
					$("#RamuneBox").bind(Ramune.events.RESIZE, function(e) {
						$("#RamuneBox").css("width", e.width);
						$("#RamuneBox").css("height", e.height);
					});

					$("#RamuneBox").bind(Ramune.events.STATE_CHANGE, function(e) {
						$("#current_state").html(e.state);
					});

					$("#RamuneBox").bind(Ramune.events.NETCONNECTION_SUCCESS, function(e) {
						$("#near_id").html(e.nearID);
					});

					console.debug("Ramune.INITIALIZED caught");
					Ramune.resize(640, 480);
				});
				Ramune.initialize();

			});	
		</script>
	</head>
	<body>
		<div id="RamuneBox"></div>
		<h3>My nearID: <span id="near_id"></span></h3>
		<h3>Current State: <span id="current_state"></span></h3>
		<h3>Commands</h3>
		<ul>
			<li><a onclick="Ramune.connect()" href="#">Connect</a></li>
			<li><a onclick="placeCall()" href="#">Place Call</a></li>
			<li><a onclick="Ramune.acceptCall()" href="#">Accept Call</a></li>
			<li><a onclick="Ramune.cancelCall()" href="#">Cancel Call</a></li>
			<li><a onclick="Ramune.ignoreCall()" href="#">Ignore Call</a></li>
			<li><a onclick="Ramune.endCall()" href="#">End Call</a></li>
			<li><a onclick="Ramune.resize(320, 240)" href="#">Ramune.resize(320, 240)</a></li>
		</ul>
		<div id="camera">
			<p>Current Camera Name: <span id="currentCameraName"></span>	</p>
			<form id="local_camera">
				<fieldset>
					<!--legend>Local Camera</legend-->
					<dl>
						<!-- Local Quality -->
						<dt><label for="local_quality">Video Quality:</label></dt>
						<dd>
							<input type="text" id="local_quality" name="local_quality" value="90" />
							<button type="button" id="local_quality_button" name="local_quality_button" onclick="Ramune.lpc('setQuality', document.forms['local_camera']['local_quality'].value)">Change</button>
						</dd>
					</dl>
				</fieldset>
			</form>
		</div>
	</body>
</html>