<!--

RamuneTest.html

Copyright Â© 2008 The Regents of the University of California
All Rights Reserved

Created by Hector Guillermo Parra, hector@hectorparra.com
California Institute for Telecommunications and Information Technology
University of California, Irvine

-->
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Ramune Test</title>
		
		<!-- Third-party (vendor) -->
		<script type="text/javascript" src="http://marco.calit2.uci.edu/lib/swfobject/2.2/swfobject.js"></script>
		<script type="text/javascript" src="http://marco.calit2.uci.edu/lib/swfobject/fabridge/FABridge.js"></script>
		<script type="text/javascript" src="http://marco.calit2.uci.edu/lib/jquery/jquery-1.3.2.js"></script>

		<!-- Ramune -->
		<script type="text/javascript" src="Ramune.js"></script>
		<script type="text/javascript">
			RamuneTest = {
				placeCall: function() {
					v = prompt("Adobe Stratus farID: ");
					if (v !== null)
						Ramune.placeCall("?", v);
				},
				acceptCall: function() {
					Ramune.acceptCall();
				},
				cancelCall: function() {
					Ramune.cancelCall();
				},
				ignoreCall: function() {
					Ramune.endCall();
				},
				endCall: function() {
					Ramune.endCall();
				}
			}
		
			$(document).ready(function() {

				

				// FIXME: redesign
				Ramune.addEventListener(Ramune.INITIALIZED, function() {
					console.debug("Ramune.INITIALIZED caught");
					Ramune.resize(640, 480);
					Ramune.connect();
				});
				
				Ramune.initialize();
				
				// NOTE: SWFObject replaces my _div_ with _object_ so I have to bind after init
				
				$("#Ramune").bind(Ramune.events.RESIZE, function(e) {
					$("#Ramune").css("width", e.width);
					$("#Ramune").css("height", e.height);
				});
				
				$("#Ramune").bind(Ramune.events.STATE_CHANGE, function(e) {
					$("#current_state").html(e.state);
				});
				
				$("#Ramune").bind(Ramune.events.NETCONNECTION_SUCCESS, function(e) {
					$("#near_id").html(e.nearID);
				});
			});
		</script>
		<style>
			body {
				color: white;
				background-color: black;
			}
		
			#Ramune {
				border: 1px solid #AAAAAA;
			}
		</style>
	<body>
		<div id="Ramune"></div>
		<h3>My nearID: <span id="near_id"></span></h3>
		<h3>Current State: <span id="current_state"></span></h3>
		<h3>Commands</h3>
		<ul>
			<li><a href="#" onclick="RamuneTest.placeCall()">Place Call</a></li>
			<li><a href="#" onclick="RamuneTest.acceptCall()">Accept Call</a></li>
			<li><a href="#" onclick="RamuneTest.cancelCall()">Cancel Call</a></li>
			<li><a href="#" onclick="RamuneTest.ignoreCall()">Ignore Call</a></li>
			<li><a href="#" onclick="RamuneTest.endCall()">End Call</a></li>
		</ul>
		<div id="camera">
			<p>Current Camera Name: <span id="currentCameraName"></span>	</p>
			<form id="local_camera">
				<fieldset>
					<!--legend>Local Camera</legend-->
					<dl>
						<!-- Local Quality -->
						<dt><label for="local_quality">Video Quality:</label></dt>
						<dd>
							<input id="local_quality" name="local_quality" value="90">
							<button id="local_quality_submit" name="local_quality_submit" type="button" onclick="set_local_quality(document.forms['local_camera']['local_quality'].value)">Change</button>
						</dd>
					</dl>
				</fieldset>
			</form>
		</div>
	</body>
</html>
